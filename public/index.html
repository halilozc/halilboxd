<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>halilboxd - letterboxd bizi kıskanıyor</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <meta name="theme-color" content="#1d1d1f">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <!-- Poppins Font for Logo -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB-Vqp4_2kUyme8A11qIo-Nc_fnhbadxoc",
            authDomain: "halilboxd.firebaseapp.com",
            projectId: "halilboxd",
            storageBucket: "halilboxd.firebasestorage.app",
            messagingSenderId: "914360053593",
            appId: "1:914360053593:web:96ef47f0bb765b33606648",
            measurementId: "G-1R4WXX8B7Q"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        provider.addScope('email');
        provider.addScope('profile');

        // Make Firebase functions available globally
        window.auth = auth;
        window.db = db;
        window.provider = provider;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithPopup = signInWithPopup;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;
        window.doc = doc;
        window.setDoc = setDoc;
        window.getDoc = getDoc;
        window.collection = collection;
        window.addDoc = addDoc;

        console.log('Firebase Auth:', auth);
        console.log('Firebase Firestore:', db);
    </script>
</head>
<body>
    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content auth-modal">
            <div class="modal-header">
                <h2 id="authModalTitle">Giriş Yap</h2>
                <button class="modal-close" onclick="closeAuthModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <div id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="loginEmail">E-posta</label>
                        <input type="email" id="loginEmail" placeholder="E-posta adresinizi girin">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Şifre</label>
                        <input type="password" id="loginPassword" placeholder="Şifrenizi girin">
                    </div>
                    <button id="loginBtn" class="auth-btn primary">Giriş Yap</button>
                    <div class="auth-divider">
                        <span>veya</span>
                    </div>
                    <button id="googleLoginBtn" class="auth-btn google">
                        <i class="fab fa-google"></i>
                        Google ile Giriş Yap
                    </button>
                    <p class="auth-switch">
                        Hesabınız yok mu? <a href="#" onclick="switchToRegister()">Kayıt Ol</a>
                    </p>
                </div>

                <!-- Register Form -->
                <div id="registerForm" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="registerEmail">E-posta</label>
                        <input type="email" id="registerEmail" placeholder="E-posta adresinizi girin">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Şifre</label>
                        <input type="password" id="registerPassword" placeholder="Şifrenizi girin (en az 6 karakter)">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Şifre Tekrar</label>
                        <input type="password" id="confirmPassword" placeholder="Şifrenizi tekrar girin">
                    </div>
                    <button id="registerBtn" class="auth-btn primary">Kayıt Ol</button>
                    <div class="auth-divider">
                        <span>veya</span>
                    </div>
                    <button id="googleRegisterBtn" class="auth-btn google">
                        <i class="fab fa-google"></i>
                        Google ile Kayıt Ol
                    </button>
                    <p class="auth-switch">
                        Zaten hesabınız var mı? <a href="#" onclick="switchToLogin()">Giriş Yap</a>
                    </p>
                </div>
            </div>
        </div>
    </div>



    <div class="dashboard-container">
        <div class="main-content">
            <div class="search-header">
                <h1 class="light-logo" id="logo" style="cursor: pointer;">halilboxd</h1>
                <div class="user-welcome" id="userWelcome" style="display: none;">
                    <h2 class="light-logo-small" style="cursor: pointer;"><span id="userDisplayName"></span> hoş geldin knk</h2>
                </div>
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="search-input" placeholder="">
                        <button id="search-btn">Ara</button>
                    </div>
                    <button id="calendar-btn" class="calendar-button" title="Takvim">
                        <i class="fas fa-calendar-alt"></i>
                    </button>
                </div>
            </div>
            
            <!-- Auth Section -->
            <div class="auth-section">
                <div class="auth-box">
                    <button id="authBtn" class="auth-input">
                        Giriş Yap
                    </button>
                </div>
            </div>
            
            <!-- Daha Sonra İzle Filmler Section -->
            <div class="favorites-section" id="watchlist-movies-section">
                <h2 class="favorites-title">
                    Daha Sonra İzle - Filmler
                    <button class="layout-toggle rotated" onclick="toggleLayout('watchlist-movies')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="watchlist-movies" class="favorites-grid">
                    <!-- Daha sonra izle filmler buraya gelecek -->
                </div>
            </div>
            
            <!-- Daha Sonra İzle Diziler Section -->
            <div class="favorites-section" id="watchlist-shows-section">
                <h2 class="favorites-title">
                    Daha Sonra İzle - Diziler
                    <button class="layout-toggle rotated" onclick="toggleLayout('watchlist-shows')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="watchlist-shows" class="favorites-grid">
                    <!-- Daha sonra izle diziler buraya gelecek -->
                </div>
            </div>
            
            <!-- İzlendi Filmler Section -->
            <div class="favorites-section" id="watched-movies-section">
                <h2 class="favorites-title">
                    İzlendi - Filmler
                    <button class="layout-toggle rotated" onclick="toggleLayout('watched-movies')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="watched-movies" class="favorites-grid">
                    <!-- İzlendi filmler buraya gelecek -->
                </div>
            </div>
            
            <!-- Favori Filmler Section -->
            <div class="favorites-section" id="favorite-movies-section">
                <h2 class="favorites-title">
                    Favori Filmler
                    <button class="layout-toggle rotated" onclick="toggleLayout('favorite-movies')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="favorite-movies" class="favorites-grid">
                    <!-- Favori filmler buraya gelecek -->
                </div>
            </div>
            
            <!-- İzlendi Diziler Section -->
            <div class="favorites-section" id="watched-shows-section">
                <h2 class="favorites-title">
                    İzlendi - Diziler
                    <button class="layout-toggle rotated" onclick="toggleLayout('watched-shows')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="watched-shows" class="favorites-grid">
                    <!-- İzlendi diziler buraya gelecek -->
                </div>
            </div>
            
            <!-- Favori Diziler Section -->
            <div class="favorites-section" id="favorite-shows-section">
                <h2 class="favorites-title">
                    Favori Diziler
                    <button class="layout-toggle rotated" onclick="toggleLayout('favorite-shows')">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                </h2>
                <div id="favorite-shows" class="favorites-grid">
                    <!-- Favori diziler buraya gelecek -->
                </div>
            </div>
            
            <!-- Search Results Section -->
            <div class="search-results-section" id="search-results-section" style="display: none;">
                <h2 class="search-results-title">
                    <i class="fas fa-search"></i>
                    Arama Sonuçları
                </h2>
                <div id="content" class="results-grid">
                    <!-- Search results will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification" class="notification-popup">
        <div class="notification-content">
            <i id="notification-icon" class="notification-icon"></i>
            <span id="notification-text" class="notification-text"></span>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Film/Dizi Detayları</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-poster">
                    <img id="modalPoster" src="" alt="Poster">
                </div>
                <div class="modal-info">
                    <div class="info-row">
                        <span class="info-label">Yıl:</span>
                        <span id="modalYear"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Tür:</span>
                        <span id="modalGenre"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Süre:</span>
                        <span id="modalRuntime"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Yönetmen:</span>
                        <span id="modalDirector"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Oyuncular:</span>
                        <span id="modalActors"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Puan:</span>
                        <span id="modalRating"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Özet:</span>
                        <p id="modalPlot"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendarModal" class="modal">
        <div class="modal-content calendar-modal">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-calendar-alt"></i>
                    Takvim
                </h2>
                <button class="modal-close" onclick="closeCalendarModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="diary-container">
                    <div class="diary-filters">
                        <button class="filter-btn active" data-filter="all">Tümü</button>
                        <button class="filter-btn" data-filter="movies">Filmler</button>
                        <button class="filter-btn" data-filter="shows">Diziler</button>
                    </div>
                    <div id="monthlyEvents" class="events-list diary-list">
                        <!-- Günlük kayıtları JavaScript ile doldurulacak -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Diary Entry Modal -->
    <div id="diaryModal" class="modal">
        <div class="modal-content diary-entry-modal">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-book-open"></i>
                    İzleme Günlüğü Kaydı
                </h2>
                <button class="modal-close" onclick="closeDiaryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="diary-form">
                    <div class="form-group">
                        <label for="diaryTitle">İçerik Adı</label>
                        <input type="text" id="diaryTitle" placeholder="Film veya dizi adını girin" readonly disabled>
                    </div>
                    <div class="form-group">
                        <label for="diaryType">Tür</label>
                        <select id="diaryType" disabled>
                            <option value="movie">Film</option>
                            <option value="show">Dizi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="diaryDate">İzleme Tarihi</label>
                        <input type="date" id="diaryDate">
                    </div>
                    <div class="form-group">
                        <label for="diaryRating">Puanınız</label>
                        <div class="rating-input">
                            <div class="hearts">
                                <i class="fa-solid fa-heart" data-rating="1"></i>
                                <i class="fa-solid fa-heart" data-rating="2"></i>
                                <i class="fa-solid fa-heart" data-rating="3"></i>
                                <i class="fa-solid fa-heart" data-rating="4"></i>
                                <i class="fa-solid fa-heart" data-rating="5"></i>
                            </div>
                            <span class="rating-text">Puan seçin</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="saveDiaryEntry" class="save-btn">Kaydet</button>
                        <button onclick="closeDiaryModal()" class="cancel-btn">İptal</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getFirestore, doc, setDoc, getDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB-Vqp4_2kUyme8A11qIo-Nc_fnhbadxoc",
            authDomain: "halilboxd.firebaseapp.com",
            projectId: "halilboxd",
            storageBucket: "halilboxd.firebasestorage.app",
            messagingSenderId: "914360053593",
            appId: "1:914360053593:web:96ef47f0bb765b33606648",
            measurementId: "G-1R4WXX8B7Q"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        provider.addScope('email');
        provider.addScope('profile');

        // Make auth and firestore available globally
        window.auth = auth;
        window.db = db;
        window.provider = provider;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithPopup = signInWithPopup;
        window.signOut = signOut;
        window.setDoc = setDoc;
        window.getDoc = getDoc;
        window.doc = doc;
        window.onSnapshot = onSnapshot;
    </script>

    <script src="script.js"></script>
</body>
</html>